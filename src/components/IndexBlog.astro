---
export interface Props {
	title: string;
	description: string;
	date: string;
	tags: string[];
	image?: string;
	author: {
		name: string;
		role: string;
		avatar?: string;
	};
	href: string;
	gradient?: string;
	icon?: string;
}

const { title, description, date, tags, image, author, href, gradient = "from-blue-600 to-purple-700", icon } = Astro.props;
---

<article class="bg-gray-800 border-radius-default overflow-hidden flex-1 flex flex-col">
	<!-- Imagen -->
	<div class={`h-48 bg-gradient-to-br ${gradient} relative`}>
		{image ? (
			<img src={image} alt={title} class="w-full h-full object-cover" />
		) : (
			<div class="absolute inset-0 bg-black bg-opacity-20 flex items-center justify-center">
				{icon ? (
					<div set:html={icon} class="w-16 h-16 text-white opacity-60" />
				) : (
					<svg class="w-16 h-16 text-white opacity-60" fill="currentColor" viewBox="0 0 20 20">
						<path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
					</svg>
				)}
			</div>
		)}
	</div>
	<div class="p-6 flex flex-col flex-grow">
		<!-- Tags -->
		<div class="flex flex-wrap gap-2 mb-3">
			{tags.map((tag, index) => {
				const colors = [
					"bg-blue-600",
					"bg-green-600", 
					"bg-yellow-600",
					"bg-purple-600",
					"bg-pink-600",
					"bg-red-600"
				];
				const colorClass = colors[index % colors.length];
				return (
					<span class={`${colorClass} text-white text-xs px-2 py-1 rounded-full`}>{tag}</span>
				);
			})}
		</div>
		<!-- Título -->
		<h3 class="text-xl font-bold text-white mb-2 line-clamp-2">{title}</h3>
		<!-- Fecha -->
		<p class="text-sm text-gray-400 mb-3">{date}</p>
		<!-- Descripción -->
		<p class="text-gray-300 text-sm mb-4 flex-grow line-clamp-3">{description}</p>
		<!-- Autor -->
		<div class="flex items-center justify-between mt-auto">
			<div class="flex items-center">
				{author.avatar ? (
					<img src={author.avatar} alt={author.name} class="w-8 h-8 rounded-full mr-3" />
				) : (
					<div class="w-8 h-8 bg-gray-600 rounded-full mr-3"></div>
				)}
				<div>
					<p class="text-sm font-semibold text-white">{author.name}</p>
					<p class="text-xs text-gray-400">{author.role}</p>
				</div>
			</div>
			<!-- Botón -->
			<a href={href} class="bg-blue-600 hover:bg-blue-700 text-white text-sm px-4 py-2 rounded-lg transition-colors duration-200">
				Leer
			</a>
		</div>
	</div>
</article>

<style>
	.line-clamp-2 {
		display: -webkit-box;
		-webkit-line-clamp: 2;
		-webkit-box-orient: vertical;
		overflow: hidden;
	}
	
	.line-clamp-3 {
		display: -webkit-box;
		-webkit-line-clamp: 3;
		-webkit-box-orient: vertical;
		overflow: hidden;
	}
</style>