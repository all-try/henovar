---
import Layout from '../layouts/Layout.astro';
import Titulo from '../components/Titulo.astro';
import Parrafo from '../components/Parrafo.astro';
import Badge from '../components/Badge.astro';
import BlogBadge from '../components/BlogBadge.astro';
import BotonPrimario from '../components/BotonPrimario.astro';
import BotonSecundario from '../components/BotonSecundario.astro';
import { blogPosts, getFeaturedPosts, getRecentPosts } from '../data/blogs';

const featuredPosts = getFeaturedPosts();
const mainPost = featuredPosts[0]; // Solo el primer post destacado
const allPosts = blogPosts; // Todos los posts
const totalPosts = blogPosts.length; // Total de blogs disponibles
---

<Layout 
	title="Blog - Henovar"
	description="Descubre las últimas tendencias en desarrollo web, tecnología y consejos de expertos en nuestro blog. Mantente actualizado con Henovar."
	keywords="blog, desarrollo web, tecnología, tutoriales, tendencias, consejos, programación"
>
	<!-- Hero Section -->
	<section class="header-offset section section-padding">
		<div class="max-w-7xl mx-auto text-center">
			<Badge class="mb-6">Blog</Badge>
			<Titulo level={1} alignMobile="left" alignDesktop="center" highlight="conocimiento" class="mb-6">
				Compartimos nuestro conocimiento
			</Titulo>
			<Parrafo alignMobile="left" alignDesktop="center" class="max-w-3xl mx-auto mb-8">
				Descubre las **últimas tendencias**, tutoriales y consejos de expertos en desarrollo web y tecnología.
			</Parrafo>
		</div>
	</section>

	<!-- Artículo Destacado -->
	<div class="bg-[url('/img/bg/large-bg2.png')] bg-cover bg-top bg-no-repeat">
		<section class="section section-padding">
			<div class="max-w-6xl mx-auto">
				<div class="text-left mb-5">
					
					<Titulo level={2} alignMobile="left" alignDesktop="left" class="mb-4">Últimas Publicaciones</Titulo>
					<BlogBadge class="">Artículo Destacado</BlogBadge>
				</div>

				<!-- Artículo Principal -->
				{mainPost && (
					<div class="border-radius-large overflow-hidden mb-16">
						<div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
							<div class="h-64 lg:h-auto">
								<img src={mainPost.image} alt={mainPost.title} class="w-full h-full object-cover rounded-lg" />
							</div>
							<div>
								<div class="flex flex-col space-y-4">
									<div class="flex items-center space-x-3">
										<BlogBadge>{mainPost.category}</BlogBadge>
										<Parrafo alignMobile="left" alignDesktop="left" color="muted" class="text-sm">
											{new Date(mainPost.date).toLocaleDateString('es-ES', { year: 'numeric', month: 'long', day: 'numeric' })} • {mainPost.readTime}
										</Parrafo>
									</div>
									<Titulo level={3} alignMobile="left" alignDesktop="left" class="mb-4">
										{mainPost.title}
									</Titulo>
									<Parrafo alignMobile="left" alignDesktop="left" class="mb-6">
										{mainPost.excerpt}
									</Parrafo>
									<div class="flex items-center justify-between">
										<div class="flex items-center">
											<div class="w-12 h-12 bg-gray-600 rounded-full mr-4">
												<img src={mainPost.author.avatar} alt={mainPost.author.name} class="w-full h-full object-cover rounded-full" />
											</div>
											<div>
												<Parrafo alignMobile="left" alignDesktop="left" class="font-medium text-white">{mainPost.author.name}</Parrafo>
												<Parrafo alignMobile="left" alignDesktop="left" color="muted" class="text-sm">{mainPost.author.role}</Parrafo>
											</div>
										</div>
										<BotonSecundario href={`/blog/${mainPost.slug}`}>Leer Más</BotonSecundario>
									</div>
								</div>
							</div>
						</div>
					</div>
				)}

				<!-- Grid de Todos los Artículos -->
				<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-15 lg:gap-y-15 lg:gap-x-8 mb-12">
					{allPosts.map(post => (
						<article class="overflow-hidden">
							<div class="h-48 mb-4">
								<img src={post.image} alt={post.title} class="w-full h-full object-cover rounded-lg" />
							</div>
							<div>
								<div class="flex flex-col space-y-3">
									<div class="flex items-center space-x-2">
										<BlogBadge>{post.category}</BlogBadge>
										<Parrafo alignMobile="left" alignDesktop="left" color="muted" class="text-xs">
											{new Date(post.date).toLocaleDateString('es-ES', { day: 'numeric', month: 'short' })} • {post.readTime}
										</Parrafo>
									</div>
									<Titulo level={4} alignMobile="left" alignDesktop="left" class="mb-2 line-clamp-2">
										{post.title}
									</Titulo>
									<Parrafo alignMobile="left" alignDesktop="left" class="mb-4 text-sm line-clamp-3">
										{post.excerpt}
									</Parrafo>
									<div class="flex items-center justify-between mt-auto">
										<div class="flex items-center">
											<div class="w-8 h-8 bg-gray-600 rounded-full mr-3">
												<img src={post.author.avatar} alt={post.author.name} class="w-full h-full object-cover rounded-full" />
											</div>
											<Parrafo alignMobile="left" alignDesktop="left" color="muted" class="text-sm">{post.author.name}</Parrafo>
										</div>
										<a href={`/blog/${post.slug}`} class="rounded-md text-gray-200 hover:text-white text-base bg-gray-700 hover:bg-gray-800 px-3 py-1.5 font-medium transition-colors">Leer →</a>
									</div>
								</div>
							</div>
						</article>
					))}
				</div>


			</div>
		</section>
	</div>

	<!-- Newsletter Section -->
	<section class="section section-padding container-bg-darker">
		<div class="max-w-4xl mx-auto text-center">
			<Titulo level={2} alignMobile="left" alignDesktop="center" highlight="newsletter" class="mb-6">
			Suscríbete a nuestro newsletter
		</Titulo>
		<Parrafo alignMobile="left" alignDesktop="center" class="mb-8">
			Recibe las **últimas actualizaciones** y artículos directamente en tu bandeja de entrada.
		</Parrafo>
			<div class="flex flex-col sm:flex-row gap-4 max-w-md mx-auto">
				<input 
					type="email" 
					placeholder="Tu email" 
					class="flex-1 px-4 py-3 bg-gray-800 border border-gray-600 border-radius-default text-white placeholder-gray-400 focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500"
				>
				<BotonPrimario type="button">Suscribirse</BotonPrimario>
			</div>
			<Parrafo alignMobile="left" alignDesktop="center" color="muted" class="mt-4">
			No spam. Puedes darte de baja en cualquier momento.
		</Parrafo>
		</div>
	</section>
</Layout>