---
import Layout from '../layouts/Layout.astro';
import Titulo from '../components/Titulo.astro';
import Parrafo from '../components/Parrafo.astro';
import Badge from '../components/Badge.astro';
import BlogBadge from '../components/BlogBadge.astro';
import BotonPrimario from '../components/BotonPrimario.astro';
import BotonSecundario from '../components/BotonSecundario.astro';
import PageBanner from '../components/PageBanner.astro';
import { Image } from 'astro:assets';
import { blogPosts, getFeaturedPosts, getRecentPosts } from '../data/blogs';
import pageTopBanner from '../assets/images/bg/page-top-banner.png';

const featuredPosts = getFeaturedPosts();
const salientPosts = blogPosts.filter(post => post.salient); // Posts destacados
const regularPosts = blogPosts.filter(post => !post.salient); // Posts normales
const totalPosts = blogPosts.length; // Total de blogs disponibles
---

<Layout 
	title="Blog - Henovar"
	description="Descubre las últimas tendencias en desarrollo web, tecnología y consejos de expertos en nuestro blog. Mantente actualizado con Henovar."
	keywords="blog, desarrollo web, tecnología, tutoriales, tendencias, consejos, programación"
>
	<div class="bg-page-dark">
		<PageBanner 
			titulo="Compartimos nuestro conocimiento"
			parrafo="Descubre las **últimas tendencias**, tutoriales y consejos de expertos en desarrollo web y tecnología."
			badge="Blog"
			highlight="conocimiento"
			imagenFondo={pageTopBanner}
		/>

		<!-- Artículo Destacado -->
		<section class="section section-padding">
			<div class="max-w-6xl mx-auto">
				<div class="text-left mb-5">
					
					<Titulo level={2} alignMobile="left" alignDesktop="left" class="mb-4">Últimas Publicaciones</Titulo>
					<BlogBadge class="">Artículo Destacado</BlogBadge>
				</div>

				<!-- Artículos Destacados -->
				{salientPosts.map(post => (
					<div class="border-radius-large overflow-hidden mb-16">
						<div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
							<div class="h-64 lg:h-auto">
								<Image src={post.image} alt={post.title} class="w-full h-full object-cover rounded-lg" loading="eager" width={600} height={400} />
							</div>
							<div>
								<div class="flex flex-col space-y-4">
									<div class="flex items-center space-x-3">
										<BlogBadge>{post.category}</BlogBadge>
										<Parrafo alignMobile="left" alignDesktop="left" color="muted" class="text-sm">
											{new Date(post.date).toLocaleDateString('es-ES', { year: 'numeric', month: 'long', day: 'numeric' })} • {post.readTime}
										</Parrafo>
									</div>
									<Titulo level={3} alignMobile="left" alignDesktop="left" class="mb-4">
										{post.title}
									</Titulo>
									<Parrafo alignMobile="left" alignDesktop="left" class="mb-6">
										{post.excerpt}
									</Parrafo>
									<div class="flex items-center justify-between">
											<p class="text-left text-sm sm:text-base md:text-lg lg:text-lg leading-relaxed text-gray-400">Por {post.author.name}</p>
											<a href={`/blog/${post.slug}`} class="inline-flex items-center rounded-md text-gray-200 hover:text-white text-base bg-gray-700 hover:bg-gray-800 px-4 py-2 font-medium transition-colors">
													Leer Más
													<svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
														<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
													</svg>
												</a>
										</div>
								</div>
							</div>
						</div>
					</div>
				))}

			<!-- Grid de Artículos Regulares -->
				{regularPosts.length > 0 && (
					<div>
						<h3 class="text-white leading-widest tracking-tight text-left text-2xl md:text-3xl lg:text-4xl font-semibold mb-8">Más Artículos</h3>
						<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-15 lg:gap-y-15 lg:gap-x-8 mb-12">
							{regularPosts.map(post => (
								<article class="overflow-hidden">
									<div class="h-48 mb-4">
								<Image src={post.image} alt={post.title} class="w-full h-full object-cover rounded-lg" loading="lazy" width={400} height={300} />
							</div>
									<div>
										<div class="flex flex-col space-y-3">
											<div class="flex items-center space-x-2">
												<BlogBadge>{post.category}</BlogBadge>
												<Parrafo alignMobile="left" alignDesktop="left" color="muted" class="text-xs">
													{new Date(post.date).toLocaleDateString('es-ES', { day: 'numeric', month: 'short' })} • {post.readTime}
												</Parrafo>
											</div>
											<h4 class="text-white leading-widest tracking-tight text-left text-xl sm:text-lg md:text-lg lg:text-xl font-semibold mb-2">
												{post.title}
											</h4>
											<p class="leading-relaxed text-sm sm:text-sm md:text-sm lg:text-sm text-left text-gray-200 mb-4">
												{post.excerpt}
											</p>
											<div class="flex items-center justify-between mt-auto">
												<p class="text-left text-sm sm:text-xs leading-relaxed text-gray-400">Por {post.author.name}</p>
												<a href={`/blog/${post.slug}`} class="inline-flex items-center rounded-md text-gray-200 hover:text-white text-base bg-gray-700 hover:bg-gray-800 px-4 py-2 font-medium transition-colors">
															Leer Más
															<svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
																<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
															</svg>
														</a>
											</div>
										</div>
									</div>
								</article>
							))}
						</div>
					</div>
				)}


			</div>
			
			<!-- Enlace de regreso -->
			<div class="max-w-6xl mx-auto text-right mt-8">
				<a href="/" class="inline-flex items-center text-gray-200 hover:text-white transition-colors text-lg font-medium">
					<svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
					</svg>
					Volver a Inicio
				</a>
			</div>
		</section>
	</div>
</Layout>